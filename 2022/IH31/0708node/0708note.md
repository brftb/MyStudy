// cd /Users/takekota/Documents/2022年度その他/IH31
// cd 0708node/app4
// node app4-1
// ブラウザで「localhost:9000」見てみ
// localhost:9000/app4-1に変更
// control + C で強制終了

▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼

endpointとlistenの間に
statusを作成して、そのままresponse
どのページか知らんけど状態を送信するということ。

▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼

「res.sendFile(__dirname+"/views/index.html")」はそのままresponseだったけど
EJSを利用して値をなんやかんや
EJS:テンプレートエンジン(header,footerとか)

npm install express
npm install ejs

やってることはPHPとかわらない
拡張子をhtmlからejsに変更するだけ

従来：htmlがjsを読み込んでクライアントに渡す
今後：ejsがhtmlを組み立てクライアントに渡す

「app.set('views engine', 'ejs');」EJS使用準備
「res.render('index4-1.ejs', {value1:'<h2>HAL</h2>', value2:'大阪'})」でできるよ
ejs側は
```ejs
<%=value1 %><br>
<%-value2 %>
```

「=」：そのまま文字列を表示
「-」：タグを適応させる

▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼

app.get('/app4-1-1/:val1/:val2', function(req, res){}
「/:val1」これがルートパラメータってやつです
ルートパラメータはURLのホスト部の後の値を取得するということです
アマゾンとかヤフーとかの個人を特定するユーザーのおすすめ表示するしてます


★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆
4-1
EJSやってみよう

★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆
4-2
headerとfooterをinclude

★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆
4-3
ループの利用
(プロセス起動中は)裏で記憶している変数を利用
phpはシングルスレッドでその人専用だが
nodejsはマルチスレッドでいろんな人が共通で変数持ってる
DBでいうとコネクション部分を共通化してSQLを使ってる

★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆
4-4
ルートパラメータの値を取ってくる

★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆
4-5
非同期通信（GET,POST,PUT,DELETE）

配列を作成してJsonで返す（別のURL利用）
ブラウザ側で非同期通信して中身の確認

