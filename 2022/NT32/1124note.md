▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼

### ● アクセス権の確認の復習

<br>
##### （例題）
/home にディレクトリ test を作成。グループは eigyo が共有で使用可能。
eigyo グループは user1 と tanaka が所属している。
チェックとして、test ディレクトリ内に a.txt を作成。
eigyo グループのメンバーが編集できることを確認。
user2 はアクセスできない。


（解）
```
cd /home
ls
su : ルートユーザーに切り替え（PW:halhal）

// ディレクトリ作成
mkdir test

// ユーザー作成
useradd user1
useradd tanaka

// グループ作成
groupadd eigyo
// グループに所属
usermod -G eigyo user1
usermod -G eigyo tanaka

// 所有グループの変更
chgrp eigyo test

// アクセス権の変更
chmod 7 7 0 test

// SGIDの設定
chmod -R g+s test

// 以下チェック

su user1
touch a.txt

su tanaka
cat a.txt
```


▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼

### ● スティッキービットの設定

cd /home
su

// 全員が使用可能なディレクトリの作成
mkdir all
chmod 7 7 7 all

// 誰でも作成/変更/削除が行えるが、
// 自身が作成したファイルを他人が削除するのはNGにしたい。

★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆

// 作成した本人とルートのみ削除可能
chmod -R o+t [ディレクトリ名]

★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆

// ディレクトリ単位で設定
のはずがcentOSではファイル単位で設定する

touch a.txt
chmod -R o+t [ファイル名]
vi a.txt
rm a.txt


▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼

● SUID : セットユーザーID。自身の内容部分だけ修正できる特殊な権限。

パスワードなどで設定されている権限
本来ルート権限でしかパスワードの変更はできないが、
ユーザー自身が自分のパスワードを変更するときだけ
ルートの権限で設定が行える。
※ 一般ユーザーにルート権限を付与してしまうので、通常使わない。

passwd [パスワード]

chmod -R u+s [ファイル名]


▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼

● アーカイブと圧縮

アーカイブ：複数ファイルを一つにまとめること。(ディレクトリもまとめられる)
圧縮：ファイル容量を小さくすること。

Windowsでは一括で行われるが、Linuxでは別コマンドになっている。

▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼▲▼

* アーカイブ

tar -cf [アーカイブ名.tar] [アーカイブしたい複数のファイル名]
tar : archive
c : create

★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆

```
touch a.txt
touch b.txt
touch c.txt

tar -cf abc.tar a.txt b.txt c.txt
```

※ a.txt b.txt c.txt は消えない

★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆

アーカイブの中身を確認
tar -tf [アーカイブ名.tar]
tar -tf abc.tar

★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆

アーカイブの中身を追加
tar -rf [アーカイブ名.tar] [アーカイブしたい複数のファイル名]

```
touch d.txt
tar -rf abc.tar d.txt
```
★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆

アーカイブの展開（解除）
tar -xf [アーカイブ名.tar]

```
mkdir here
mv abc.tar here
cd here
tar -xf abc.tar
```
※ abc.tar は消えない

